(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{104:function(e,t,a){e.exports=a.p+"static/media/science.d068b534.svg"},121:function(e,t,a){e.exports=a.p+"static/media/civic.ac56adb9.svg"},210:function(e,t,a){e.exports=a.p+"static/media/logo.55a3ffa1.png"},329:function(e,t,a){e.exports=a.p+"static/media/broken.972e509b.svg"},338:function(e,t,a){e.exports=a.p+"static/media/mouse.b437ecc6.svg"},359:function(e,t,a){e.exports=a(733)},399:function(e,t,a){},481:function(e,t,a){},495:function(e,t,a){},540:function(e,t,a){},541:function(e,t,a){},553:function(e,t,a){},554:function(e,t,a){},555:function(e,t,a){},556:function(e,t,a){},557:function(e,t,a){},607:function(e,t,a){},634:function(e,t,a){},697:function(e,t,a){},732:function(e,t,a){},733:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(58),s=a(40),r=a(98),c=a(30),l=a(72),u=a(309),d=a(310),p=a(311);var h=a.n(p).a.agent(),m="https://ourlabels.org",g="GOT_LABELS",b=function(e){return function(e){return h.withCredentials().get("".concat(m,"/v1/get/labels")).end(function(t,a){t||null==a.body?console.log("Error",t):a.body.success&&(console.log("res body labels: ",a.body),e(y(a.body)))})}},f=function(e,t){return function(t){return h.withCredentials().post(m+"/v1/add/labels").send({labels:e}).end(function(e,a){t(b())})}},y=function(e){return{type:g,labels:e}},v="LOGGED_IN",j="SIGNED_UP",w=function(e){return{type:v,payload:e}},E=function(e){return{type:j,payload:e}},O=function(e,t){return function(a){return h.post("".concat(m,"/v1/auth/login")).withCredentials().set("Content-Type","application/x-www-form-urlencoded").send({username:e,password:t}).end(function(e,t){e||null==t.body?a(w(null)):t.body.success&&(a(w(t.body)),a(b()))})}},k=function(e,t,a){return function(n){return h.post("".concat(m,"/v1/auth/signup")).set("Content-Type","application/json").send({username:e,password:t,email:a}).end(function(e,t){e||null==t.body?n(E(!1)):t.body.success&&n(E(!0))})}},S={loggedIn:!1,signedUp:!1,session:null,username:null,email:null,just_logged_in:!1,currentProject:null,score:0};function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;if(t.payload)switch(t.type){case v:return Object.assign({},e,{session:t.payload.session,username:t.payload.username,email:t.payload.email,score:parseInt(t.payload.score,10),just_logged_in:!0,currentProject:t.payload.currentProject,role:t.payload.role,loggedIn:!0,signedUp:!1});case j:return t.payload?Object.assign({},e,{loggedIn:!1,signedUp:!0,session:null}):e;default:return e}return e}var N="GOT_ANNOTATIONS",x=function(e,t){return function(a){return h.withCredentials().post(m+"/v1/add/annotation").send({boxes:e}).end(function(e,a){e||null==a.body||a.body.success&&"function"===typeof t&&t()})}},P=function(e,t){return function(a){return h.withCredentials().get(m+"/v1/get/annotations").query({offset:e}).end(function(e,n){e||null==n.body?a(q(null)):n.body.success&&a(q(n.body,t))})}};function q(e,t){return{type:N,annotations:e,callback:t}}var z={annotations:[]};function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;if(t.annotations)switch(t.type){case N:return"function"===typeof t.callback&&t.callback(),Object.assign({},e,{annotations:t.annotations.boxes,index:t.annotations.idx,callback:t.callback});default:return e}return e}var L=function(e){return function(t){return h.withCredentials().get(m+"/v1/get/image").end(function(a,n){if(!a&&null!=n.body)return n.body.success?(t(D(n.body)),void t(P(0,e))):void 0;t(D(null,e))})}},T=function(e,t,a){return function(n){return h.withCredentials().post(m+"/v1/update/index").send({offset:e,toNumber:t}).end(function(e,t){n(L(a))})}},D=function(e,t){return{type:"CHANGED_IMAGE",image:e,callback:t}},R={image:null,imageid:null},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;if(t.image)switch(t.type){case"CHANGED_IMAGE":return"function"===typeof t.callback&&t.callback(),Object.assign({},e,{image:t.image.image,imageid:t.image.imageid,index:t.image.index,sequence:t.image.sequence,count:t.image.count});default:return e}else"function"===typeof t.callback&&t.callback();return e},U=a(153),W=a(378),H=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"json";return function(a){return h.withCredentials().get("".concat(m,"/v1/get/annotations/as/").concat(t)).query({projectId:e}).responseType("blob").then(function(e){W(e.body,"annotations.tar.bz2")}).catch(function(e){})}},A=function(e){return function(t){return h.withCredentials().post("".concat(m,"/v1/change/project")).send({project_id:e}).end(function(e,a){e||null==a.body?t(Z(null)):a.body.success&&(t(Y()),t(b()))})}},F=function(e){return function(t,a){return h.withCredentials().post("".concat(m,"/v1/join/project")).send({project_id:e}).end(function(e,a){e||null==a.body||!a.body.success?t(Z(null)):t(Y())})}},M=function(e){return function(t,a){return h.withCredentials().post("".concat(m,"/v1/leave/project")).send({project_id:e}).end(function(e,a){e||null==a.body||!a.body.success?t(Z(null)):t(Y())})}},V=function(){return function(e,t){return h.withCredentials().get("".concat(m,"/v1/get/projects/update")).end(function(t,a){t||null==a.body||!a.body.success?e(Q(null)):(e(b()),e(Q(a.body)))})}},G=function(e){return function(t,a){if(a().auth.loggedIn)return h.withCredentials().post("".concat(m,"/v1/request/project")).send({project_name:e}).end(function(e,a){e||null==a.body||!a.body.success?t($(null)):t($(a.body))})}},X=function(e,t,a,n,o,i,s,r,c){return function(l,u){if(u().auth.loggedIn){for(var d=h.withCredentials().post("".concat(m,"/v1/update/project")).field("allowed[]",e).field("refused[]",t).field("requested[]",a).field("publicType",n).field("owner",o).field("description",i).field("fullDescription",s).field("type",r),p=c.filter(function(e){return!e.deleted&&e.new}),g=c.filter(function(e){return!e.new&&e.deleted}),b=0;b<p.length;b+=1){p[b].begin=0,p[b].end=0,d.attach("files",p[b].newFile)}var f=p.map(function(e){return B(e,["newName","newVideo","newHSplit","newVSplit","newBeginS","newLengthS","newEveryNFrames","begin","end"])}),y=g.map(function(e){return e.originalName});d.field("new",JSON.stringify(f)),d.field("delete",JSON.stringify(y)),d.end(function(e,t){var a=!0,n=!1,o=void 0;try{for(var i,s=c[Symbol.iterator]();!(a=(i=s.next()).done);a=!0){var r=i.value;null!=r.newFile&&window.URL.revokeObjectURL(r.newFile.preview)}}catch(e){n=!0,o=e}finally{try{a||null==s.return||s.return()}finally{if(n)throw o}}l(Y())})}}},B=function(e,t){var a={};if(0===t.length)return e;var n=!0,o=!1,i=void 0;try{for(var s,r=t[Symbol.iterator]();!(n=(s=r.next()).done);n=!0){var c=s.value;a[c]=e[c]}}catch(l){o=!0,i=l}finally{try{n||null==r.return||r.return()}finally{if(o)throw i}}return a},Y=function(){return function(e,t){return t().auth.loggedIn?h.withCredentials().get("".concat(m,"/v1/get/projects")).end(function(t,a){t||null==a.body||!a.body.success?e(J(null)):e(J(a.body))}):h.get("".concat(m,"/v1/get/projects/guest")).end(function(t,a){t||null==a.body||!a.body.success?e(J(null)):e(J(a.body))})}},Z=function(e){return{type:"CHANGED_PROJECT",current_project:e}},J=function(e){return{type:"GOT_PROJECTS",projects:e}},Q=function(e){return{type:"GOT_PROJECT_FOR_UPDATE",project:e}},$=function(e){return{type:"REQUESTED_ACCESS",access_requested:e}},K={projects:{owned:[],requested:[],allowed:[],refused:[],other:[]},currentProject:null,projectForUpdate:null},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;if("GOT_PROJECTS"===t.type){if(Object(U.isNull)(t.projects))return e;var a,n=t.projects.projects,o=[],i=[],s=[],r=[],c=[];return n.forEach(function(e){e.current_project&&(a=e.id),e.owner?o.push(e):e.requested?i.push(e):e.allowed?s.push(e):e.refused?r.push(e):c.push(e)}),Object.assign({},e,{currentProject:a,projects:{owned:o,allowed:s,requested:i,refused:r,other:c}})}return"GOT_FILE"===t.type?e:"CHANGED_PROJECT"===t.type?null==t.current_project?e:Object.assign({},e,{current_project:t.current_project.current_project}):"GOT_PROJECT_FOR_UPDATE"===t.type?Object.assign({},e,{projectForUpdate:t.project}):e},te="GOT_SEQUENCES",ae=function(){return function(e){return h.withCredentials().get("".concat(m,"/v1/get/sequences")).end(function(t,a){t||null==a.body||!a.body.success?e(oe(null)):e(oe(a.body))})}},ne=function(e){return function(t){return h.withCredentials().post("".concat(m,"/v1/update/sequence")).send({sequence:e}).end(function(e,a){return e||null==a.body||!a.body.success?void ie(null):(t(L()),void t(P(0)))})}},oe=function(e){return{type:te,sequences:e}},ie=function(e){return{type:"NEW_SEQUENCE",current_sequence:e}},se={sequences:null,current_sequence:null};function re(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case te:return Object.assign({},e,{sequences:t.sequences.sequences});default:return e}}var ce="GOT_TYPES",le=function(){return function(e){return h.get("".concat(m,"/v1/get/types")).end(function(t,a){t?e(ue(null)):a.body.success?e(ue(a.body)):e(ue(null))})}},ue=function(e){return{type:ce,types:e}},de={projectTypes:{}};function pe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0;if(Object(U.isNull)(t.types))return e;switch(t.type){case ce:var a=t.types.projectTypes;console.log("PROJECT TYPES:",t);var n={};return a.forEach(function(e){n[e.id]={name:e.type,video:e.video}}),Object.assign({},e,{projectTypes:n});default:return e}}var he={labels:{}};function me(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0;if(t.labels)switch(t.type){case g:var a={};return t.labels.labels.labels.forEach(function(e){a[e.type]={type:e.type,description:e.description,r:e.r,g:e.g,b:e.b,a:e.a}}),Object.assign({},e,{labels:a});default:return e}return e}var ge=function(e){return Object(c.c)({router:Object(r.b)(e),annotations:I,auth:C,image:_,project:ee,sequence:re,types:pe,labels:me})},be=a(224),fe=Object(l.a)();var ye=a(154),ve=a(12),je=a(13),we=a(16),Ee=a(14),Oe=a(17),ke=a(4),Se=a(45),Ce=a(734),Ne=a(347),xe=a(313),Pe=a(210),qe=a.n(Pe),ze=a(99),Ie=a.n(ze),Le=(a(399),function(e){function t(e){var a;return Object(ve.a)(this,t),(a=Object(we.a)(this,Object(Ee.a)(t).call(this,e))).state={width:window.innerWidth,menuOpen:!1},a.resize=a.resize.bind(Object(ke.a)(Object(ke.a)(a))),a.onMouseOver=a.onMouseOver.bind(Object(ke.a)(Object(ke.a)(a))),a.onMouseOut=a.onMouseOut.bind(Object(ke.a)(Object(ke.a)(a))),a.closeMenuAndReleaseLabels=a.closeMenuAndReleaseLabels.bind(Object(ke.a)(Object(ke.a)(a))),a}return Object(Oe.a)(t,e),Object(je.a)(t,[{key:"onMouseOut",value:function(e){}},{key:"onMouseOver",value:function(e,t){}},{key:"componentWillMount",value:function(){this.resize()}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.resize)}},{key:"componentWillReceiveProps",value:function(e){}},{key:"resize",value:function(){this.setState({width:window.innerWidth})}},{key:"closeMenuAndReleaseLabels",value:function(){this.props.releaseLabels(),this.setState({menuOpen:!1})}},{key:"render",value:function(){var e=this,t=this.props,a=t.items,n=t.router;console.log(n);var i=Object.keys(a).map(function(t){return o.a.createElement(Ce.a,{key:t,className:n.location.pathname===a[t]?"active-link":"inactive-link",onClick:function(){e.props.push(a[t])}},t)});if(this.state.width>700){var s=[],r=!0,c=!1,l=void 0;try{for(var u,d=i[Symbol.iterator]();!(r=(u=d.next()).done);r=!0){var p=u.value;s.push(p),s.push(o.a.createElement("div",{className:"nav-spacer",key:p.props.children+"-div"},"|"))}}catch(h){c=!0,l=h}finally{try{r||null==d.return||d.return()}finally{if(c)throw l}}return s.pop(),o.a.createElement("div",{className:"nav-menu"},o.a.createElement("a",{href:"https://ourlabels.org"},o.a.createElement("div",{className:"nav-logo-holder"},o.a.createElement(Ne.a,{inline:!0,verticalAlign:"bottom",src:qe.a,height:"50px",alt:"The ourlabels logo",className:"nav-logo-image"}),o.a.createElement(Ne.a,{inline:!0,verticalAlign:"bottom",src:Ie.a,height:"30px",alt:"something about ourlabels",className:"nav-logo-name"}))),s)}return o.a.createElement("div",{className:"nav-menu-small"},o.a.createElement("a",{href:"https://ourlabels.org",className:"a-logo-small"},o.a.createElement(Ne.a,{src:qe.a,className:"nav-logo-small",id:"nav-logo",alt:"The ourlabels logo"})),o.a.createElement(xe.elastic,{right:!0,isOpen:this.state.menuOpen},i))}}]),t}(n.Component)),Te=function(e){function t(e){var a;return Object(ve.a)(this,t),(a=Object(we.a)(this,Object(Ee.a)(t).call(this,e))).state={},a.releaseLabels=a.releaseLabels.bind(Object(ke.a)(Object(ke.a)(a))),a.logged_in_items_nolabels={home:"/",projects:"/projects"},a.logged_in_items={home:"/",annotate:"/annotate",projects:"/projects"},a.logged_out_items={home:"/",login:"/login",signup:"/signup",projects:"/projects"},a}return Object(Oe.a)(t,e),Object(je.a)(t,[{key:"releaseLabels",value:function(e){this.props.dispatch({type:N,annotations:{annotations:[]}})}},{key:"render",value:function(){var e=this.props,t=e.loggedIn,a=e.email,n=e.score,i=e.username,s=e.labels,r=e.router,c=e.push;return o.a.createElement("div",{className:"nav"},o.a.createElement(Le,{key:"navLoggedIn-".concat(t),email:a,score:n,username:i,router:r,push:c,items:t?Object.keys(s).length>0?this.logged_in_items:this.logged_in_items_nolabels:this.logged_out_items,closeMenu:this.props.closeMenu,releaseLabels:this.releaseLabels}),o.a.createElement("br",null))}}]),t}(n.Component),De=Te=Object(s.c)(function(e){var t=e.auth,a=e.labels,n=e.router;return{labels:a.labels,loggedIn:t.loggedIn,signed_up:t.signed_up,session:t.session,email:t.email,score:t.score,current_project:t.current_project,owned_projects:t.owned_projects,all_projects:t.all_projects,username:t.username,router:n}},function(e){return Object(c.b)({push:Se.d},e)})(Te),Re=a(162),_e=a(744),Ue=a(750),We=a(327),He=a(86),Ae=a(742),Fe=a(747),Me=(a(481),Object(Re.a)({mapPropsToValues:function(e){return{username:"",password:""}},validate:function(e,t){var a={};return e.username||(a.username="Required"),e.password?(e.password.length<9||e.password.length>60)&&(a.password="Password is between 9 and 60 characters"):a.password="Required",a},handleSubmit:function(e,t){t.props.handleSubmit(e.username,e.password)}})(function(e){var t=e.values,a=e.errors,n=e.touched,i=e.handleChange,s=e.handleBlur,r=e.handleSubmit,c=e.isSubmitting;return o.a.createElement(_e.a,{onSubmit:r},o.a.createElement(Ue.a,{textAlign:"center"},o.a.createElement(We.a,{style:{width:"100%"}},o.a.createElement(He.a,{name:"user circle outline",size:"huge"})),o.a.createElement(We.a,{style:{width:"100%"}},window.innerWidth<500&&o.a.createElement(Ae.a,{className:"login-input",type:"text",name:"username",placeholder:"username",autoComplete:"username",onChange:i,onBlur:s,value:t.username}),window.innerWidth>=500&&o.a.createElement(Ae.a,{label:"Username",className:"login-input",type:"text",name:"username",placeholder:"username",autoComplete:"username",onChange:i,onBlur:s,value:t.username})),n.username&&a.username&&o.a.createElement(We.a,null,o.a.createElement("div",{className:"error-label"},a.username)),o.a.createElement(We.a,{style:{width:"100%"}},window.innerWidth<500&&o.a.createElement(Ae.a,{className:"login-input",type:"password",name:"password",placeholder:"password",autoComplete:"password",onChange:i,onBlur:s,value:t.password}),window.innerWidth>=500&&o.a.createElement(Ae.a,{label:"Password",className:"login-input",type:"password",name:"password",placeholder:"password",autoComplete:"password",onChange:i,onBlur:s,value:t.password})),n.password&&a.password&&o.a.createElement(We.a,null,o.a.createElement("div",{className:"error-label"},a.password)),o.a.createElement(We.a,{style:{width:"100%"}},o.a.createElement(Ce.a,{className:"button-login",type:"submit",primary:!0,disabled:c},"Login"))))})),Ve=function(e){function t(){return Object(ve.a)(this,t),Object(we.a)(this,Object(Ee.a)(t).apply(this,arguments))}return Object(Oe.a)(t,e),Object(je.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"login-holder"},o.a.createElement(Fe.a,{className:"card-login"},o.a.createElement(Fe.a.Header,{className:"header-login"},o.a.createElement(Ne.a,{src:Ie.a,width:"30%"}),o.a.createElement("h4",{className:"login-header"},"Log in")),o.a.createElement(Fe.a.Content,{className:"content-login"},o.a.createElement(Me,{handleSubmit:this.props.formHandler}))))}}]),t}(n.Component),Ge=function(e){function t(e){var a;return Object(ve.a)(this,t),(a=Object(we.a)(this,Object(Ee.a)(t).call(this,e))).state={username:"",password:""},a}return Object(Oe.a)(t,e),Object(je.a)(t,[{key:"componentWillMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){e.loggedIn&&e.history.push("/")}},{key:"render",value:function(){return o.a.createElement(Ve,{formHandler:this.props.logIn})}}]),t}(n.Component),Xe=Ge=Object(s.c)(function(e){return{loggedIn:e.auth.loggedIn,signedUp:e.auth.signedUp,session:e.auth.session,email:e.auth.email,score:e.auth.score,current_project:e.auth.current_project,owned_projects:e.auth.owned_projects,all_projects:e.auth.all_projects,username:e.auth.username}},function(e){return Object(c.b)({logIn:O},e)})(Ge),Be=(a(495),/^[_A-Za-z0-9-+]+(.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(.[A-Za-z0-9]+)*(.[A-Za-z]{2,})$/),Ye=Object(Re.a)({mapPropsToValues:function(e){return{username:"",password:"",retype:"",email:""}},validate:function(e,t){var a={};return e.username||(a.username="Required"),e.password?(e.password.length<16||e.password.length>60)&&(a.password="Password must be between 16 and 60 characters"):a.password="Required",e.retype?e.retype!==e.password&&(a.retype="Password and verification must be the same"):a.retype="Required",e.email?Be.test(e.email)||(a.email="Email should be of someuser@ourlables.com"):a.email="Required",a},handleSubmit:function(e,t){t.props.handleSubmit(e.username,e.password,e.email)}})(function(e){var t=e.values,a=e.errors,n=e.touched,i=e.handleChange,s=e.handleBlur,r=e.handleSubmit,c=e.isSubmitting;return o.a.createElement(_e.a,{onSubmit:r},o.a.createElement(Ue.a,{textAlign:"center"},o.a.createElement(We.a,{style:{width:"100%"}},o.a.createElement(He.a,{name:"user circle outline",size:"huge"})),o.a.createElement(We.a,{style:{width:"100%"}},window.innerWidth<500&&o.a.createElement(Ae.a,{className:"signup-input",type:"text",name:"email",placeholder:"email",autoComplete:"email",onChange:i,onBlur:s,value:t.email}),window.innerWidth>=500&&o.a.createElement(Ae.a,{label:"Email",className:"signup-input",type:"text",name:"email",placeholder:"email",autoComplete:"email",onChange:i,onBlur:s,value:t.email})),n.email&&a.email&&o.a.createElement(We.a,null,o.a.createElement("div",{className:"error-label"},a.email)),o.a.createElement(We.a,{style:{width:"100%"}},window.innerWidth<500&&o.a.createElement(Ae.a,{className:"signup-input",type:"text",name:"username",placeholder:"username",autoComplete:"username",onChange:i,onBlur:s,value:t.username}),window.innerWidth>=500&&o.a.createElement(Ae.a,{label:"Username",className:"signup-input",type:"text",name:"username",placeholder:"username",autoComplete:"username",onChange:i,onBlur:s,value:t.username})),n.username&&a.username&&o.a.createElement(We.a,null,o.a.createElement("div",{className:"error-label"},a.username)),o.a.createElement(We.a,{style:{width:"100%"}},window.innerWidth<500&&o.a.createElement(Ae.a,{className:"signup-input",type:"password",name:"password",placeholder:"password",autoComplete:"password",onChange:i,onBlur:s,value:t.password}),window.innerWidth>=500&&o.a.createElement(Ae.a,{label:"Password",className:"signup-input",type:"password",name:"password",placeholder:"password",autoComplete:"password",onChange:i,onBlur:s,value:t.password})),n.password&&a.password&&o.a.createElement(We.a,null,o.a.createElement("div",{className:"error-label"},a.password)),o.a.createElement(We.a,{style:{width:"100%"}},window.innerWidth<500&&o.a.createElement(Ae.a,{className:"signup-input",type:"password",name:"retype",placeholder:"retype password",autoComplete:"password",onChange:i,onBlur:s,value:t.retype}),window.innerWidth>=500&&o.a.createElement(Ae.a,{label:"Retype Password",className:"signup-input",type:"password",name:"retype",placeholder:"retype password",autoComplete:"password",onChange:i,onBlur:s,value:t.retype})),n.retype&&a.retype&&o.a.createElement(We.a,null,o.a.createElement("div",{className:"error-label"},a.retype)),o.a.createElement(We.a,{style:{width:"100%"}},o.a.createElement(Ce.a,{className:"button-signup",type:"submit",primary:!0,disabled:c},"Signup"))))}),Ze=function(e){function t(){return Object(ve.a)(this,t),Object(we.a)(this,Object(Ee.a)(t).apply(this,arguments))}return Object(Oe.a)(t,e),Object(je.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"signup-holder"},o.a.createElement(Fe.a,{className:"card-signup"},o.a.createElement(Fe.a.Header,{className:"header-signup"},o.a.createElement(Ne.a,{src:Ie.a,width:"30%"}),o.a.createElement("h4",{className:"signup-header"},"Signup")),o.a.createElement(Fe.a.Content,{className:"content-signup"},o.a.createElement(Ye,{handleSubmit:this.props.formHandler}))))}}]),t}(n.Component),Je=function(e){function t(e){var a;return Object(ve.a)(this,t),(a=Object(we.a)(this,Object(Ee.a)(t).call(this,e))).state={username:"",password:"",email:""},a}return Object(Oe.a)(t,e),Object(je.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.signed_up&&e.history.push("/login")}},{key:"render",value:function(){return o.a.createElement(Ze,{formHandler:this.props.signUp})}}]),t}(n.Component),Qe=Object(s.c)(function(e){return{loggedIn:e.auth.loggedIn,signedUp:e.auth.signedUp,session:e.auth.session,email:e.auth.email,score:e.auth.score,current_project:e.auth.current_project,owned_projects:e.auth.owned_projects,all_projects:e.auth.all_projects,username:e.auth.username}},function(e){return Object(c.b)({signUp:k},e)})(Je),$e=a(745),Ke=a(328),et=a.n(Ke),tt=a(54),at=(a(540),function(e){function t(){var e,a;Object(ve.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(we.a)(this,(e=Object(Ee.a)(t)).call.apply(e,[this].concat(o)))).nodes={},a.update=a.update.bind(Object(ke.a)(Object(ke.a)(a))),a.finalizeUpdate=a.finalizeUpdate.bind(Object(ke.a)(Object(ke.a)(a))),a.handleRectMove=a.handleRectMove.bind(Object(ke.a)(Object(ke.a)(a))),a.getPointsInOrder=a.getPointsInOrder.bind(Object(ke.a)(Object(ke.a)(a))),a}return Object(Oe.a)(t,e),Object(je.a)(t,[{key:"componentDidMount",value:function(){}},{key:"finalizeUpdate",value:function(){this.nodes.rect&&this.props.selected&&this.props.updateDims(this.nodes.rect.getX(),this.nodes.rect.getY(),this.nodes.rect.getWidth(),this.nodes.rect.getHeight())}},{key:"update",value:function(e,t){var a=this.nodes[e],n=a.getX();if(!(n<.05)&&!(o<.05)){var o=a.getY();switch(n=n<.05?.05:n>this.props.stageW-.05?this.props.stageW-.05:n,o=o<.05?.05:o>this.props.stageH-.05?this.props.stageH-.05:o,this.nodes[e].setX(n),this.nodes[e].setY(o),e){case"topLeft":this.nodes.topRight.setY(o),this.nodes.bottomLeft.setX(n);break;case"topRight":this.nodes.topLeft.setY(o),this.nodes.bottomRight.setX(n);break;case"bottomRight":this.nodes.bottomLeft.setY(o),this.nodes.topRight.setX(n);break;case"bottomLeft":this.nodes.bottomRight.setY(o),this.nodes.topLeft.setX(n)}this.getPointsInOrder(),this.nodes.rect.position(this.nodes.topLeft.position());var i=this.nodes.topRight.getX()-this.nodes.topLeft.getX(),s=this.nodes.bottomLeft.getY()-this.nodes.topLeft.getY();i&&s&&(this.nodes.rect.setWidth(i),this.nodes.rect.setHeight(s))}}},{key:"getPointsInOrder",value:function(){var e=this.nodes.rect.getHeight(),t=this.nodes.rect.getWidth();if(e<=0){var a=this.nodes.topLeft.getY(),n=this.nodes.bottomLeft.getY();this.nodes.topLeft.setY(n),this.nodes.bottomLeft.setY(a),this.nodes.topRight.setY(n),this.nodes.bottomRight.setY(a)}if(t<=0){var o=this.nodes.topLeft.getX(),i=this.nodes.topRight.getX();this.nodes.topLeft.setX(i),this.nodes.topRight.setX(o),this.nodes.bottomLeft.setX(i),this.nodes.bottomRight.setX(o)}}},{key:"handleRectMove",value:function(e){this.nodes.topLeft.setX(this.nodes.rect.getX()),this.nodes.topLeft.setY(this.nodes.rect.getY()),this.nodes.topRight.setY(this.nodes.rect.getY()),this.nodes.topRight.setX(this.nodes.rect.getX()+this.nodes.rect.getWidth()),this.nodes.bottomRight.setX(this.nodes.rect.getX()+this.nodes.rect.getWidth()),this.nodes.bottomRight.setY(this.nodes.rect.getY()+this.nodes.rect.getHeight()),this.nodes.bottomLeft.setX(this.nodes.rect.getX()),this.nodes.bottomLeft.setY(this.nodes.rect.getY()+this.nodes.rect.getHeight())}},{key:"render",value:function(){var e=this,t=this.props.type.r,a=this.props.type.g,n=this.props.type.b,i=this.props.type.a;return o.a.createElement(tt.Group,{name:this.props.name,ref:function(t){return e.nodes.group=t}},o.a.createElement(tt.Rect,{ref:function(t){return e.nodes.rect=t},x:this.props.x,y:this.props.y,width:this.props.w,height:this.props.h,shadowEnabled:this.props.selected,fillEnabled:!0,fill:this.props.selected?"rgba(120,120,120,0.10)":null,shadowOpacity:.5,shadowOffsetX:3,shadowOffsetY:3,shadowBlur:.2,shadowColor:this.props.selected?"#ff0":null,stroke:this.props.selected?"rgba(".concat(t,", ").concat(a,", ").concat(n,", ").concat(i,")"):"rgba(120,120,120,0.01)",strokeWidth:this.props.selected?2+this.props.zoom:this.props.zoom,draggable:this.props.selected,onDragMove:this.handleRectMove,onDragEnd:this.finalizeUpdate,dragBoundFunc:function(t){var a;return a=t.y+e.nodes.rect.getHeight()>e.props.stageH-.01?e.props.stageH-e.nodes.rect.getHeight()-.01:t.y>.01?t.y:.01,{x:t.x+e.nodes.rect.getWidth()>e.props.stageW-.01?e.props.stageW-e.nodes.rect.getWidth()-.01:t.x>.01?t.x:.01,y:a}}}),o.a.createElement(tt.Circle,{ref:function(t){return e.nodes.topLeft=t},x:this.props.x+1,y:this.props.y+1,radius:2*(2+this.props.zoom),strokeWidth:this.props.selected?1+this.props.zoom:this.props.zoom/2,stroke:"#555",fill:this.props.selected?"#ddd":"rgba(120,120,120,0.01)",name:"topLeft",style:{zIndex:this.props.selected?101:0},draggable:this.props.selected,onDragMove:function(){e.update("topLeft",!1)},onTouchStart:function(){e.nodes.rect.setDraggable(!1),e.nodes.group.setDraggable(!1)},onTouchEnd:function(){e.nodes.rect.setDraggable(!0),e.nodes.group.setDraggable(!0),e.finalizeUpdate()},onDragEnd:function(){e.finalizeUpdate()},onMouseUp:function(){e.finalizeUpdate()}}),o.a.createElement(tt.Circle,{draggable:this.props.selected,ref:function(t){return e.nodes.topRight=t},style:{zIndex:this.props.selected?101:0},x:this.props.x+this.props.w-1,y:this.props.y+1,radius:2*(2+this.props.zoom),strokeWidth:this.props.selected?1+this.props.zoom:this.props.zoom/2,stroke:"#555",fill:this.props.selected?"#ddd":"rgba(120,120,120,0.01)",name:"topRight",onDragMove:function(){e.update("topRight",!1)},onTouchStart:function(){e.nodes.group.setDraggable(!1),e.nodes.rect.setDraggable(!1)},onTouchEnd:function(){e.nodes.group.setDraggable(!0),e.nodes.rect.setDraggable(!0),e.finalizeUpdate()},onDragEnd:function(){e.finalizeUpdate()},onMouseUp:function(){e.finalizeUpdate()}}),o.a.createElement(tt.Circle,{draggable:this.props.selected,style:{zIndex:this.props.selected?101:0},ref:function(t){return e.nodes.bottomLeft=t},x:this.props.x+1,y:this.props.y+this.props.h-1,radius:2*(2+this.props.zoom),strokeWidth:this.props.selected?1+this.props.zoom:this.props.zoom/2,stroke:"#555",fill:this.props.selected?"#ddd":"rgba(120,120,120,0.01)",name:"bottomLeft",onDragMove:function(){e.update("bottomLeft",!1)},onTouchStart:function(){e.nodes.group.setDraggable(!1),e.nodes.rect.setDraggable(!1)},onTouchEnd:function(){e.nodes.group.setDraggable(!0),e.nodes.rect.setDraggable(!0),e.finalizeUpdate()},onDragEnd:function(){e.finalizeUpdate()},onMouseUp:function(){e.finalizeUpdate()}}),o.a.createElement(tt.Circle,{draggable:this.props.selected,style:{zIndex:this.props.selected?101:0},ref:function(t){return e.nodes.bottomRight=t},x:this.props.x+this.props.w-1,y:this.props.y+this.props.h-1,radius:2*(2+this.props.zoom),strokeWidth:this.props.selected?1+this.props.zoom:this.props.zoom/2,stroke:"#555",fill:this.props.selected?"#ddd":"rgba(120,120,120,0.01)",name:"bottomRight",onDragMove:function(){e.update("bottomRight",!1)},onTouchStart:function(){e.nodes.group.setDraggable(!1),e.nodes.rect.setDraggable(!1)},onTouchEnd:function(){e.nodes.group.setDraggable(!0),e.nodes.rect.setDraggable(!0),e.finalizeUpdate()},onDragEnd:function(){e.finalizeUpdate()},onMouseUp:function(){e.finalizeUpdate()}}))}}]),t}(n.Component)),nt=a(329),ot=a.n(nt),it={brokenImage:document.createElement("img")},st=it.brokenImage;st.src=ot.a,st.onload=function(){this.brokenImage=!0};var rt=function(e){function t(){var e,a;Object(ve.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(we.a)(this,(e=Object(Ee.a)(t)).call.apply(e,[this].concat(o)))).state={image:null,error:!1,loaded:!1},a}return Object(Oe.a)(t,e),Object(je.a)(t,[{key:"loadImg",value:function(e){var t=this;if(!e)throw new Error("Expected image src instead saw "+typeof e);var a=it[e];a||((a=it[e]=document.createElement("img")).loadFns=[],a.errorFns=[],a.onerror=function(){a.error=!0,a.errorFns.forEach(function(e){return e.call(a)})},a.onload=function(){var e="naturalHeight"in a,t=e?"naturalHeight":"height";a[e?"naturalWidth":"width"]+a[t]===0?a.onerror():(a.loaded=!0,a.loadFns.forEach(function(e){return e.call(a)}))}),a.loaded||a.error?a.error?this.setState({error:!0,image:st}):this.setState({loaded:!0,image:a}):(a.loadFns.push(function(){a.loaded=!0,t.setState({loaded:!0,image:a})}),a.errorFns.push(function(){a.error=!0,t.setState({error:!0,image:st})})),a.src||(a.src=e)}},{key:"fillRect",value:function(e,t){return t.width/t.height<e.width/e.height?{width:e.width,height:t.height*(e.width/t.width)}:{height:e.height,width:t.width*(e.height/t.height)}}},{key:"fitRect",value:function(e,t){var a=t.width/t.height>e.width/e.height?{width:e.width,height:t.height*(e.width/t.width)}:{height:e.height,width:t.width*(e.height/t.height)};return this.props.onLoad(a),a}},{key:"getDims",value:function(e,t,a){switch(e){case"fill":return this.fillRect(t,a);case"fit":default:return this.fitRect(t,a)}}},{key:"componentWillMount",value:function(){this.loadImg(this.props.src)}},{key:"render",value:function(){var e={width:this.props.width,height:this.props.height},t=this.state.image,a=t?{width:t.width,height:t.height}:e,n=this.getDims(this.props.space,e,a),i={x:this.props.x||0,y:this.props.y||0};return o.a.createElement(tt.Image,{key:this.props.number,image:this.state.image,x:i.x,y:i.y,width:n.width,height:n.height})}}]),t}(n.Component),ct=function(e){function t(e){var a;return Object(ve.a)(this,t),(a=Object(we.a)(this,Object(Ee.a)(t).call(this,e))).state={updated:!1,annotations:[]},a.stageRef=null,a.gotImageSize=a.gotImageSize.bind(Object(ke.a)(Object(ke.a)(a))),a.updateDims=a.updateDims.bind(Object(ke.a)(Object(ke.a)(a))),a.selfSelect=a.selfSelect.bind(Object(ke.a)(Object(ke.a)(a))),a.handleDoubleClick=a.handleDoubleClick.bind(Object(ke.a)(Object(ke.a)(a))),a}return Object(Oe.a)(t,e),Object(je.a)(t,[{key:"handleDoubleClick",value:function(e){if(this.stageRef){var t=this.stageRef.getStage().getPointerPosition();this.props.addAnnotation(t.x/this.imageWidth,t.y/this.imageHeight,100/this.imageWidth,100/this.imageHeight,!1,!1,!1)}}},{key:"gotImageSize",value:function(e){e.height&&e.width&&(this.imageHeight!==e.height||this.imageWidth!==e.width)&&(this.imageHeight=e.height,this.imageWidth=e.width,this.setState({updated:!0}))}},{key:"updateDims",value:function(e,t,a,n){var o=e/this.imageWidth,i=t/this.imageHeight,s=a/this.imageWidth,r=n/this.imageHeight;this.props.updateDims(o,i,s,r)}},{key:"componentDidMount",value:function(e){}},{key:"componentWillMount",value:function(e){}},{key:"componentWillReceiveProps",value:function(e,t){this.imageWidth=e.imageWidth,this.imageHeight=e.imageHeight,this.setState({image_index:e.image_index}),this.stageRef&&this.stageRef.getStage().scale({x:1,y:1})}},{key:"selfSelect",value:function(e){this.props.selectAnnotation(e)}},{key:"render",value:function(){var e=this,t=this.props.annotations[this.props.selected];return this.props.image?o.a.createElement(tt.Stage,{key:"stage-".concat(this.state.image_index),width:this.imageWidth,height:this.imageHeight,ref:function(t){e.stageRef=t}},o.a.createElement(tt.Layer,{key:"layer=".concat(this.state.image_index),onDblClick:this.handleDoubleClick},o.a.createElement(rt,{key:"img-".concat(this.state.image_index),ref:function(t){e.imageRef=t},src:this.props.image,height:this.imageHeight,width:this.imageWidth,onLoad:this.gotImageSize,space:"fit"}),this.props.annotations.map(function(t,a){if(a!==e.props.selected)return o.a.createElement(at,{key:"".concat(e.state.image_index,"-").concat(t.name),name:t.name,x:t.x*e.imageWidth,y:t.y*e.imageHeight,w:t.w*e.imageWidth,h:t.h*e.imageHeight,stageW:e.imageWidth,stageH:e.imageHeight,type:e.props.labels[t.type],updateDims:e.updateDims,selfSelect:e.selfSelect,zoom:e.props.zoom})}),t&&o.a.createElement(at,{key:"".concat(this.state.image_index,"-").concat(t.name),name:t.name,x:t.x*this.imageWidth,y:t.y*this.imageHeight,w:t.w*this.imageWidth,h:t.h*this.imageHeight,stageW:this.imageWidth,stageH:this.imageHeight,type:this.props.labels[t.type],updateDims:this.updateDims,selected:!0,selfSelect:this.selfSelect,zoom:this.props.zoom}))):o.a.createElement("div",null)}}]),t}(n.Component),lt=a(749),ut=(a(541),function(e){function t(e){return Object(ve.a)(this,t),Object(we.a)(this,Object(Ee.a)(t).call(this,e))}return Object(Oe.a)(t,e),Object(je.a)(t,[{key:"render",value:function(){var e=this,t=this.props.zoom;return o.a.createElement("div",{className:this.props.portrait?"zoom-holder-portrait":"zoom-holder-landscape"},o.a.createElement(lt.a,{as:"h5",className:"zoom-title"},"Zoom level"),o.a.createElement(Ae.a,{className:this.props.portrait?"zoom-input-portrait":"zoom-input-landscape",type:"number",step:"0.1",min:"0.4",max:"10.0",placeholder:"zoom",defaultValue:t,onChange:function(t,a){e.props.changeZoom(parseFloat(a.value))}}))}}]),t}(n.Component)),dt=a(746),pt=a(741),ht=a(34),mt=a.n(ht),gt=(a(553),function(e){function t(e){var a;return Object(ve.a)(this,t),(a=Object(we.a)(this,Object(Ee.a)(t).call(this,e))).changeType=a.changeType.bind(Object(ke.a)(Object(ke.a)(a))),a.changeDifficult=a.changeDifficult.bind(Object(ke.a)(Object(ke.a)(a))),a.changeOccluded=a.changeOccluded.bind(Object(ke.a)(Object(ke.a)(a))),a.changeTruncated=a.changeTruncated.bind(Object(ke.a)(Object(ke.a)(a))),a}return Object(Oe.a)(t,e),Object(je.a)(t,[{key:"changeType",value:function(e){this.props.changeType(e,"type")}},{key:"changeDifficult",value:function(e){this.props.changeType(e,"difficult")}},{key:"changeOccluded",value:function(e){this.props.changeType(e,"occluded")}},{key:"changeTruncated",value:function(e){this.props.changeType(e,"truncated")}},{key:"render",value:function(){for(var e=this,t=this.props,a=t.type,n=t.occluded,i=t.truncated,s=t.difficult,r=[],c=0,l=Object.keys(this.props.labels);c<l.length;c++){var u=l[c];r.push({text:this.props.labels[u].description,value:u})}return o.a.createElement("div",{className:this.props.portrait?"type-holder-portrait":"type-holder-landscape"},o.a.createElement(lt.a,{as:"h5",className:"type-title"},"Choose Type"),o.a.createElement(dt.a,{options:r,fluid:!0,selection:!0,defaultValue:a,placeholder:"Select type",onChange:function(t,a){e.changeType(a.value)}}),"O",o.a.createElement(pt.a,{"data-for":"occluded","data-tip":"is occluded, covered but entirely in image","data-iscapture":"true",defaultChecked:n,onChange:function(t,a){e.changeOccluded(a.checked)}}),o.a.createElement(mt.a,{id:"occluded",place:"bottom",type:"dark"}),"T",o.a.createElement(pt.a,{"data-for":"truncated","data-tip":"is truncated, off the edge of the image","data-iscapture":"true",defaultChecked:i,onChange:function(t,a){e.changeTruncated(a.checked)}}),o.a.createElement(mt.a,{id:"truncated",place:"bottom",type:"dark"}),"D",o.a.createElement(pt.a,{"data-for":"difficult","data-tip":"is difficult to determine","data-iscapture":"true",defaultChecked:s,onChange:function(t,a){e.changeDifficult(a.checked)}}),o.a.createElement(mt.a,{id:"difficult",place:"bottom",type:"dark"}))}}]),t}(n.Component)),bt=(a(554),function(e){function t(e){var a;return Object(ve.a)(this,t),(a=Object(we.a)(this,Object(Ee.a)(t).call(this,e))).changeSequence=a.changeSequence.bind(Object(ke.a)(Object(ke.a)(a))),a}return Object(Oe.a)(t,e),Object(je.a)(t,[{key:"changeSequence",value:function(e){this.props.changeSequence(e)}},{key:"render",value:function(){var e=this,t=this.props,a=t.sequences,n=t.sequence,i=[],s=!0,r=!1,c=void 0;try{for(var l,u=a[Symbol.iterator]();!(s=(l=u.next()).done);s=!0){var d=l.value;i.push({text:d.sequence,value:d.sequence})}}catch(p){r=!0,c=p}finally{try{s||null==u.return||u.return()}finally{if(r)throw c}}return o.a.createElement("div",{className:this.props.portrait?"sequence-holder-portrait":"sequence-holder-landscape"},o.a.createElement(lt.a,{as:"h5",className:"sequence-title"},"Choose Sequence"),o.a.createElement(dt.a,{options:i,fluid:!0,selection:!0,defaultValue:n,placeholder:"Select sequence",onChange:function(t,a){e.changeSequence(a.value)}}))}}]),t}(n.Component)),ft=(a(555),function(e){function t(e){return Object(ve.a)(this,t),Object(we.a)(this,Object(Ee.a)(t).call(this,e))}return Object(Oe.a)(t,e),Object(je.a)(t,[{key:"render",value:function(){for(var e=this,t=this.props,a=t.total,n=t.index,i=[],s=0;s<a;s+=1)i.push({text:s,value:s});return o.a.createElement("div",{className:this.props.portrait?"index-holder-portrait":"index-holder-landscape"},o.a.createElement(lt.a,{as:"h5",className:"index-title"},"Choose Index"),o.a.createElement(dt.a,{options:i,fluid:!0,selection:!0,defaultValue:n,placeholder:"Select index",onChange:function(t,a){e.props.updateIndex(0,a.value)}}))}}]),t}(n.Component)),yt=(a(556),function(e){function t(e){var a;return Object(ve.a)(this,t),(a=Object(we.a)(this,Object(Ee.a)(t).call(this,e))).state={topContent:null,bottomContent:null,initialTime:!0,scrollRef:null},a.onScroll=a.onScroll.bind(Object(ke.a)(Object(ke.a)(a))),a.update=a.update.bind(Object(ke.a)(Object(ke.a)(a))),a.submitChanges=a.submitChanges.bind(Object(ke.a)(Object(ke.a)(a))),a}return Object(Oe.a)(t,e),Object(je.a)(t,[{key:"onScroll",value:function(e,t){var a=this,n=e.target,i=n.scrollHeight,s=n.clientHeight,r=n.scrollTop,c=null,l=null;r+s<i&&window.innerWidth>400&&(c=o.a.createElement(He.a,{name:"angle double down",size:"big",onClick:function(){a.state.scrollRef&&(a.state.scrollRef.scrollTop=i)}})),r>0&&window.innerWidth>400&&(l=o.a.createElement(He.a,{name:"angle double up",size:"big",onClick:function(){a.state.scrollRef&&(a.state.scrollRef.scrollTop=0)}})),this.setState({bottomContent:c,topContent:l})}},{key:"componentWillReceiveProps",value:function(e){}},{key:"update",value:function(e){if(e&&this.state.initialTime){var t=null,a=null,n=e.scrollHeight,i=e.clientHeight,s=e.scrollTop;s+i<n&&window.innerWidth>400&&(t=o.a.createElement(He.a,{name:"angle double down",size:"big"})),s>0&&window.innerWidth>400&&(a=o.a.createElement(He.a,{name:"angle double up",size:"big",onClick:function(){e.scrollTop=0}})),this.setState({bottomContent:t,topContent:a,initialTime:!1,scrollRef:e})}}},{key:"submitChanges",value:function(){}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:this.props.portrait?"classifications-holder-portrait":"classifications-holder-landscape"},o.a.createElement("div",{className:"top-classification"},this.state.topContent),o.a.createElement("div",{className:this.props.portrait?"classifications-scroller-portrait":"classifications-scroller-landscape",onBlur:this.onScroll,onScroll:this.onScroll,ref:function(t){setTimeout(function(){e.update(t)},500)}},this.props.annotations&&this.props.annotations.map(function(t,a){var n=e.props.labels[t.type].r,i=e.props.labels[t.type].g,s=e.props.labels[t.type].b,r=e.props.labels[t.type].a;return o.a.createElement("div",{key:t.name,onClick:function(){e.props.selectAnnotation(t.name)},className:a===e.props.selected?"selected":"annotation",style:{backgroundColor:a===e.props.selected?"black":"rgba(".concat(n,",").concat(i,",").concat(s,",").concat(r,")")}},e.props.labels[t.type].description)}),!this.props.annotations||0===this.props.annotations.length&&o.a.createElement("div",{className:"selected",style:{backgroundColor:"black"}},"No annotations yet")),o.a.createElement("div",{className:"bottom-classification"},this.state.bottomContent),o.a.createElement("div",{className:this.props.portrait?"controls-holder-portrait":"controls-holder-landscape"},o.a.createElement(ut,{key:"zoom-component-".concat(this.props.imageid),changeZoom:this.props.changeZoom,zoom:this.props.zoom,portrait:this.props.portrait}),this.props.annotations.length>0&&o.a.createElement(gt,{key:"type-component-".concat(this.props.selected),changeType:this.props.changeType,portrait:this.props.portrait,type:this.props.annotations[this.props.selected].type,occluded:this.props.annotations[this.props.selected].occluded,difficult:this.props.annotations[this.props.selected].difficult,truncated:this.props.annotations[this.props.selected].truncated,labels:this.props.labels}),this.props.sequences&&o.a.createElement(bt,{key:"seqs-".concat(this.props.imageid),sequences:this.props.sequences,sequence:this.props.sequence,changeSequence:this.props.changeSequence}),this.props.total&&o.a.createElement(ft,{key:"idx-".concat(this.props.imageid),total:this.props.total,index:this.props.index,updateIndex:this.props.updateIndex}),o.a.createElement("div",{className:this.props.portrait?"save-portrait":"save-landscape"},o.a.createElement(Ce.a,{className:this.props.portrait?"save-button-portrait":"save-button-landscape",onClick:this.props.save,primary:!0},"Save"),o.a.createElement(Ce.a,{className:this.props.portrait?"copy-button-portrait":"copy-button-landscape",onClick:this.props.copy,secondary:!0},"Copy")),o.a.createElement("div",{className:this.props.portrait?"direction-portrait":"direction-landscape"},o.a.createElement(Ce.a,{className:this.props.portrait?"back-button-portrait":"back-button-landscape",onClick:this.props.back},o.a.createElement(He.a,{name:"arrow left"})),o.a.createElement(Ce.a,{className:this.props.portrait?"next-button-portrait":"next-button-landscape",onClick:this.props.next},o.a.createElement(He.a,{name:"arrow right"})))))}}]),t}(n.Component)),vt=(a(557),function(e){function t(e){var a;return Object(ve.a)(this,t),(a=Object(we.a)(this,Object(Ee.a)(t).call(this,e))).state={imageHeight:0,imageWidth:0,annotations:[],zoom:1,image:null,imageid:null,imageComponent:null,reset:!0},a.reset=!0,a.resetAnnotations=!0,a.resetImage=!0,a.unchanged=!0,a.annotations=[],a.imageid=null,a.oldimageid=null,a.image=null,a.selected=0,a.counter=0,a.addAnnotation=a.addAnnotation.bind(Object(ke.a)(Object(ke.a)(a))),a.updateDims=a.updateDims.bind(Object(ke.a)(Object(ke.a)(a))),a.changeType=a.changeType.bind(Object(ke.a)(Object(ke.a)(a))),a.changeZoom=a.changeZoom.bind(Object(ke.a)(Object(ke.a)(a))),a.changeSequence=a.changeSequence.bind(Object(ke.a)(Object(ke.a)(a))),a.selectAnnotation=a.selectAnnotation.bind(Object(ke.a)(Object(ke.a)(a))),a.loadImage=a.loadImage.bind(Object(ke.a)(Object(ke.a)(a))),a.windowResize=a.windowResize.bind(Object(ke.a)(Object(ke.a)(a))),a.updatePage=a.updatePage.bind(Object(ke.a)(Object(ke.a)(a))),a.keyDown=a.keyDown.bind(Object(ke.a)(Object(ke.a)(a))),a.back=a.back.bind(Object(ke.a)(Object(ke.a)(a))),a.next=a.next.bind(Object(ke.a)(Object(ke.a)(a))),a.copy=a.copy.bind(Object(ke.a)(Object(ke.a)(a))),a.save=a.save.bind(Object(ke.a)(Object(ke.a)(a))),a}return Object(Oe.a)(t,e),Object(je.a)(t,[{key:"addAnnotation",value:function(e,t,a,n,o,i,s,r){var c=this.annotations.slice(0);c.push({name:c.length>0?"".concat(parseInt(c[c.length-1].name)+1):"0",x:e,y:t,w:a,h:n,occluded:o,truncated:i,difficult:s,type:Object.keys(this.props.labels)[0]}),this.unchanged=!1,this.selected=c.length-1,this.annotations=c,this.forceUpdate()}},{key:"changeType",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"type",a=this.annotations.slice(0);a[this.selected][t]=e,this.annotations=a,this.unchanged=!1,this.forceUpdate()}},{key:"updateDims",value:function(e,t,a,n){var o=this.annotations.slice(0);o[this.selected]={name:o[this.selected].name,x:e,y:t,w:a,h:n,occluded:o[this.selected].occluded,truncated:o[this.selected].truncated,difficult:o[this.selected].difficult,type:o[this.selected].type},this.annotations=o,this.unchanged=!1,this.forceUpdate()}},{key:"positionOf",value:function(e){for(var t=0,a=this.annotations;t<a.length&&a[t].name!==e;t+=1);return t===a.length?-1:t}},{key:"selectAnnotation",value:function(e){var t=this.positionOf(e);-1!==t&&this.selected!==t&&(this.unchanged=!1,this.selected=t,this.forceUpdate())}},{key:"componentWillReceiveProps",value:function(e){if(e.annotations&&this.unchanged){var t=0,a=[],n=!0,o=!1,i=void 0;try{for(var s,r=e.annotations[Symbol.iterator]();!(n=(s=r.next()).done);n=!0){var c=s.value;a.push({name:"".concat(t),x:c.x,y:c.y,w:c.width,h:c.height,type:c.type_key,occluded:void 0!=c.occluded&&c.occluded,truncated:void 0!=c.truncated&&c.truncated,difficult:void 0!=c.difficult&&c.difficult}),t+=1}}catch(l){o=!0,i=l}finally{try{n||null==r.return||r.return()}finally{if(o)throw i}}this.resetAnnotations=!1,this.annotations=a,this.selected=0,this.image=e.image,this.oldimageid=this.imageid,this.imageid=e.imageid,this.forceUpdate()}(this.reset||this.imageid!==this.oldimageid)&&(this.reset=!1,this.loadImage())}},{key:"componentDidMount",value:function(){var e=0,t=[],a=!0,n=!1,o=void 0;try{for(var i,s=this.props.annotations[Symbol.iterator]();!(a=(i=s.next()).done);a=!0){var r=i.value;t.push({name:"".concat(e),x:r.x,y:r.y,w:r.width,h:r.height,type:r.type_key,occluded:void 0!=r.occluded&&r.occluded,truncated:void 0!=r.truncated&&r.truncated,difficult:void 0!=r.difficult&&r.difficult}),e+=1}}catch(c){n=!0,o=c}finally{try{a||null==s.return||s.return()}finally{if(n)throw o}}this.annotations=t,this.loadImage(),this.windowResize()}},{key:"changeZoom",value:function(e){if(e&&!isNaN(e)&&0!==e){var t=window.innerWidth*e,a=window.innerHeight*e;this.setState({imageWidth:t,imageHeight:a,zoom:e})}}},{key:"changeSequence",value:function(e){this.props.changeSequence(e),this.unchanged=!0,this.loadImage()}},{key:"componentWillMount",value:function(){this.props.getSequences(),this.props.getLabels(),this.loadImage(),this.windowResize(),window.addEventListener("resize",this.windowResize),window.addEventListener("keydown",this.keyDown)}},{key:"keyDown",value:function(e){"X"!==e.key&&"x"!==e.key||(this.annotations.splice(this.selected,1),this.selected=0,this.unchanged=!1,this.forceUpdate())}},{key:"componentDidMount",value:function(){this.windowResize()}},{key:"loadImage",value:function(){this.setState({showLoading:!0});this.props.getImage(this.updatePage)}},{key:"updatePage",value:function(){this.setState({showLoading:!1})}},{key:"getPreviousAnnotations",value:function(){this.setState({showLoading:!0});this.props.getAnnotations(-1,this.updatePage)}},{key:"windowResize",value:function(e){var t=window.innerWidth*this.state.zoom,a=window.innerHeight*this.state.zoom;this.setState({imageWidth:t,imageHeight:a})}},{key:"save",value:function(){this.setState({showLoading:!0}),this.reset=!1,this.selected=0,this.props.postAnnotations(this.annotations,this.next)}},{key:"copy",value:function(){this.resetAnnotations=!0,this.unchanged=!0,this.getPreviousAnnotations()}},{key:"back",value:function(){this.reset=!0,this.resetImage=!0,this.resetAnnotations=!0,this.unchanged=!0,this.props.updateIndex(-1,null,this.updatePage),this.windowResize()}},{key:"next",value:function(){this.setState({showLoading:!1}),this.reset=!0,this.resetImage=!0,this.resetAnnotations=!0,this.unchanged=!0,this.props.updateIndex(1,null,this.updatePage),this.windowResize()}},{key:"render",value:function(){return o.a.createElement("div",{className:window.innerWidth>window.innerHeight?"image-classifications-holder-landscape":"image-classifications-holder-portrait"},o.a.createElement("div",{className:window.innerWidth>window.innerHeight?"image-holder-landscape":"image-holder-portrait"},o.a.createElement($e.a,{open:this.state.showLoading,size:"mini",className:"modal-loading",center:"true"},o.a.createElement($e.a.Header,null,"Loading image"),o.a.createElement($e.a.Content,null,o.a.createElement(et.a,{type:"spin",color:"#0000ff"}))),this.image&&o.a.createElement(ct,{key:"image-".concat(this.imageid),image:this.image,annotations:this.annotations,imageid:this.imageid,image_index:this.props.image_index,annotation_index:this.props.annotation_index,imageWidth:this.state.imageWidth,imageHeight:this.state.imageHeight,updateDims:this.updateDims,addAnnotation:this.addAnnotation,selectAnnotation:this.selectAnnotation,selected:this.selected,labels:this.props.labels,zoom:this.state.zoom}),null==this.image&&o.a.createElement("div",null,"No more images")),o.a.createElement("div",{className:window.innerWidth>window.innerHeight?"classifications-holder-landscape":"classifications-holder-portrait"},o.a.createElement(yt,{key:"classificaiton-".concat(this.imageid),annotations:this.annotations,changeType:this.changeType,changeZoom:this.changeZoom,selected:this.selected,zoom:this.state.zoom,selectAnnotation:this.selectAnnotation,labels:this.props.labels,portrait:window.innerHeight>window.innerWidth,index:this.props.image_index,sequence:this.props.sequence,sequences:this.props.sequences,changeSequence:this.changeSequence,updateIndex:this.props.updateIndex,total:this.props.count,save:this.save,next:this.next,back:this.back,copy:this.copy})))}}]),t}(n.Component)),jt=Object(s.c)(function(e){var t=e.auth,a=e.annotations,n=e.labels,o=e.image,i=e.sequence;return"function"===typeof a.callback&&a.callback(a.annotations),{annotations:a.annotations,loggedIn:t.loggedIn,sequences:i.sequences,labels:n.labels,image:o.image,image_idx:o.index,annotation_index:a.index,imageid:o.imageid,image_index:o.index,sequence:o.sequence,count:o.count,project:t.current_project}},function(e){return Object(c.b)({getAnnotations:P,postAnnotations:x,getImage:L,getLabels:b,updateIndex:T,changeSequence:ne,getSequences:ae},e)})(vt),wt=(a(607),a(338)),Et=[{key:"welcome",image:a.n(wt).a,content:{header:"Welcome to ourlabels",meta:"Friday, May 18, 2018",description:"We, at ourlabels are trying to find the most convenient way to help you label sequences of images. Either create new projects or join an open one. If you're invited to a private project, you'll be able to see those projects to join."}}],Ot=function(e){function t(e){var a;return Object(ve.a)(this,t),(a=Object(we.a)(this,Object(Ee.a)(t).call(this,e))).state={activeIndex:0,modalContent:null},a.showModal=a.showModal.bind(Object(ke.a)(Object(ke.a)(a))),a.maximize=a.maximize.bind(Object(ke.a)(Object(ke.a)(a))),a}return Object(Oe.a)(t,e),Object(je.a)(t,[{key:"showModal",value:function(e){this.setState({modalContent:null})}},{key:"maximize",value:function(e){for(var t=0,a=Et;t<a.length;t++){var n=a[t];n.key===e&&this.setState({modalContent:o.a.createElement($e.a,{size:"small",closeIcon:!0,defaultOpen:!0,onClose:this.showModal,key:n.key},o.a.createElement($e.a.Header,null,n.content.header,o.a.createElement("div",{className:"header-date"},n.content.meta)),o.a.createElement($e.a.Content,{image:!0,scrolling:!0},o.a.createElement(Ne.a,{src:n.image,size:"medium",wrapped:!0}),o.a.createElement($e.a.Description,null,o.a.createElement("p",null,n.content.description))))})}}},{key:"render",value:function(){var e=this;this.state.activeIndex;return o.a.createElement("div",{className:"home"},this.state.modalContent,Et.map(function(t){return o.a.createElement(Fe.a,{key:t.key},o.a.createElement(Ne.a,{src:t.image}),o.a.createElement(Fe.a.Content,{className:"home-content"},o.a.createElement(Fe.a.Header,null,t.content.header),o.a.createElement(Fe.a.Meta,null,t.content.meta),o.a.createElement(Fe.a.Description,null,t.content.description.substr(0,90)+"...")),t.content.description.length>90&&o.a.createElement(Fe.a.Content,{extra:!0},o.a.createElement("a",{onClick:function(t){e.maximize("welcome")}},o.a.createElement(He.a,{name:"window maximize",size:"large"})," more...")))}))}}]),t}(n.Component),kt=function(e){var t=new Date(0);t.setUTCSeconds(e);return"".concat(t.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}))},St=function(e){function t(){return Object(ve.a)(this,t),Object(we.a)(this,Object(Ee.a)(t).apply(this,arguments))}return Object(Oe.a)(t,e),Object(je.a)(t,[{key:"render",value:function(){return o.a.createElement(Ot,{dateConversion:kt})}}]),t}(n.Component),Ct=St=Object(s.c)(function(e){return{loggedIn:e.auth.loggedIn,signedUp:e.auth.signedUp,session:e.auth.session,email:e.auth.email,score:e.auth.score,username:e.auth.username}},function(e){return{dispatch:e}})(St),Nt=a(339),xt=a(340),Pt=a(743),qt=a(36),zt=a(341),It=a(748),Lt=a(104),Tt=a.n(Lt),Dt=a(121),Rt=a.n(Dt),_t=(a(634),{1:Tt.a,2:Tt.a,3:Tt.a,4:Rt.a,5:Rt.a}),Ut=function(e){function t(e){var a;return Object(ve.a)(this,t),(a=Object(we.a)(this,Object(Ee.a)(t).call(this,e))).state={modal:null},a}return Object(Oe.a)(t,e),Object(je.a)(t,[{key:"showMoreInfo",value:function(e){this.props.items[e]}},{key:"getActions",value:function(e,t,a){var n=this,i=this.props.items[a];return this.props.loggedIn?o.a.createElement(Pt.a,null,"owned"===e&&t&&o.a.createElement(He.a,{fitted:!0,size:"large","data-for":"labels","data-tip":"labels","data-iscapture":"true",name:"tags",onClick:this.props.showLabels}),"owned"===e&&t&&o.a.createElement(He.a,{size:"large","data-for":"settings","data-tip":"settings","data-iscapture":"true",name:"setting",onClick:this.props.getProjectForUpdate}),t&&i.joined&&o.a.createElement(He.a,{name:"unlinkify",size:"large","data-for":"leave","data-tip":"leave","data-iscapture":"true",fitted:!0,onClick:function(){n.props.leaveProject(i.id)}}),!t&&!i.joined&&("owned"===e||"allowed"===e||i.publicType)&&o.a.createElement(He.a,{name:"linkify",size:"large","data-for":"join","data-tip":"join project","data-iscapture":"true",fitted:!0,onClick:function(){n.props.joinProject(i.id)}}),!t&&i.joined&&("owned"===e||"allowed"===e||i.publicType)&&o.a.createElement(He.a,{name:"play",size:"large","data-for":"join","data-tip":"change to this project","data-iscapture":"true",fitted:!0,onClick:function(){n.props.changeProject(i.id)}}),t&&("owned"===e||i.publicType)&&o.a.createElement("div",{className:"icon-div","data-for":"json","data-tip":"download annotations as JSON","data-iscapture":"true",onClick:function(){n.props.getProjectAnnotations(i.id,"json")}},"J"),t&&("owned"===e||i.publicType)&&o.a.createElement("div",{className:"icon-div","data-for":"XML","data-tip":"download annotations as XML","data-iscapture":"true",onClick:function(){n.props.getProjectAnnotations(i.id,"xml")}},"X"),o.a.createElement(mt.a,{id:"labels",place:"bottom",type:"dark"}),o.a.createElement(mt.a,{id:"settings",place:"bottom",type:"dark"}),o.a.createElement(mt.a,{id:"join",place:"bottom",type:"dark"}),o.a.createElement(mt.a,{id:"json",place:"bottom",type:"dark"}),o.a.createElement(mt.a,{id:"XML",place:"bottom",type:"dark"}),o.a.createElement(mt.a,{id:"leave",place:"bottom",type:"dark"})):o.a.createElement(Pt.a,null)}},{key:"render",value:function(){var e,t=this,a=this.props,n=a.type,i=a.items,s=a.filter,r=a.projectTypes,c=i.filter(function(e){return e.description.includes(s)||e.full_description.includes(s)||e.title.includes(s)});switch(n){case"owned":e="Your owned projects";break;case"allowed":e="Projects you are allowed to join";break;case"requested":e="Private projects you have requested to join";break;case"refused":e="Private projects you are unable to join";break;default:e="Other public projects"}return 0===c.length?o.a.createElement(Pt.a,null):o.a.createElement(Pt.a,null,this.state.modal,o.a.createElement(It.a,null,o.a.createElement(lt.a,{as:"h1"},e),o.a.createElement(Fe.a.Group,null,c.map(function(e,a){var i=e.title,s=e.description,c=e.currentProject,l=e.projectType,u=e.publicType,d=e.featured,p=o.a.createElement(Fe.a.Header,null,o.a.createElement(Ne.a,{src:_t[l],size:"small"}),o.a.createElement(He.a.Group,{vertical:"true",size:"large"},d&&o.a.createElement(Pt.a,null,o.a.createElement(He.a,{name:"star","data-for":"featured","data-tip":"a featured project","data-iscapture":"true"}),o.a.createElement(mt.a,{id:"featured",place:"bottom",type:"dark"})),c&&o.a.createElement(Pt.a,null,o.a.createElement(He.a,{name:"bookmark","data-for":"current","data-tip":"current project","data-iscapture":"true"}),o.a.createElement(mt.a,{id:"current",place:"bottom",type:"dark"})),u&&o.a.createElement(Pt.a,null,o.a.createElement(He.a,{name:"unlock","data-for":"public","data-tip":"public project","data-iscapture":"true"}),o.a.createElement(mt.a,{id:"public",place:"bottom",type:"dark"})),!u&&o.a.createElement(Pt.a,null,o.a.createElement(He.a,{name:"lock","data-for":"private","data-tip":"private project","data-iscapture":"true"}),o.a.createElement(mt.a,{id:"private",place:"bottom",type:"dark"})),r[l].video&&o.a.createElement(Pt.a,null,o.a.createElement(He.a,{name:"film","data-for":"video","data-tip":"video project","data-iscapture":"true"}),o.a.createElement(mt.a,{id:"video",place:"bottom",type:"dark"})))),h=o.a.createElement(Fe.a.Description,null,o.a.createElement(Ce.a,{onClick:t.showMoreInfo(a)},o.a.createElement(lt.a,{as:"h3"},i)),o.a.createElement("br",null),s),m=t.getActions(n,c,a);return o.a.createElement(Fe.a,{key:i},o.a.createElement(Fe.a.Content,null,p,h),o.a.createElement(Fe.a.Content,{extra:!0},m))}))))}}]),t}(o.a.Component),Wt=a(206),Ht=(o.a.Component,function(e){return Object.keys(e).map(function(t,a){var n=e[t];return{key:a,type:n.type,description:n.description,r:n.r,g:n.g,b:n.b,a:n.a,new:!1,modified:!1}})}),At=function(e){var t=255-e.r,a=255-e.g,n=255-e.b;return"rgba(".concat(t,",").concat(a,",").concat(n,",1.0)")},Ft=function(e){function t(e){var a;return Object(ve.a)(this,t),(a=Object(we.a)(this,Object(Ee.a)(t).call(this,e))).state={labels:Ht(a.props.labels),pickerForIndex:null},a.showPickerFor=a.showPickerFor.bind(Object(ke.a)(Object(ke.a)(a))),a.hidePicker=a.hidePicker.bind(Object(ke.a)(Object(ke.a)(a))),a.change=a.change.bind(Object(ke.a)(Object(ke.a)(a))),a.changeColor=a.changeColor.bind(Object(ke.a)(Object(ke.a)(a))),a.deleteLabel=a.deleteLabel.bind(Object(ke.a)(Object(ke.a)(a))),a.addLabel=a.addLabel.bind(Object(ke.a)(Object(ke.a)(a))),a.submit=a.submit.bind(Object(ke.a)(Object(ke.a)(a))),a}return Object(Oe.a)(t,e),Object(je.a)(t,[{key:"addLabel",value:function(e){e.preventDefault();var t=this.state.labels.sort(function(e,t){return e.key<t.key?-1:e.key>t.key?1:0}),a=t.length;t.push({key:a>0?t[a-1].key+1:0,type:"new_label",description:"",r:0,g:0,b:0,a:1,new:!0,modified:!0}),this.setState({labels:t})}},{key:"showPickerFor",value:function(e,t){e.preventDefault(),this.setState({pickerForIndex:t})}},{key:"hidePicker",value:function(){this.setState({pickerForIndex:null})}},{key:"submit",value:function(e){console.log(this.state),this.props.addLabels(this.state.labels)}},{key:"change",value:function(e,t,a){var n=this.state.labels;n[e][t]=a,this.setState({labels:n})}},{key:"deleteLabel",value:function(e,t){e.preventDefault();var a=this.state.labels;console.log("index:",t),a.splice(t,1),this.setState({labels:a})}},{key:"changeColor",value:function(e){var t=e.rgb,a=t.r,n=t.g,o=t.b,i=t.a,s=this.state,r=s.labels,c=s.pickerForIndex;r[c].r=a,r[c].g=n,r[c].b=o,r[c].a=i,r[c].modified=!0,this.setState({labels:r})}},{key:"render",value:function(){var e=this,t=this.state,a=t.labels,n=t.pickerForIndex,i={r:0,g:0,b:0,a:1};return null!=n&&(i.r=a[n].r,i.g=a[n].g,i.b=a[n].b,i.a=a[n].a),o.a.createElement(_e.a,{onSubmit:this.submit},o.a.createElement($e.a,{open:null!=n,closeIcon:!0,onClose:this.hidePicker,size:"tiny"},o.a.createElement($e.a.Header,null,"Color Picker for"," ",null!=a[n]?a[n].type:""),o.a.createElement($e.a.Content,null,o.a.createElement($e.a.Description,null,o.a.createElement(Wt.SketchPicker,{onChangeComplete:this.changeColor,color:i})))),o.a.createElement(lt.a,{as:"h2"},"Labels"),o.a.createElement(Ce.a,{color:"green",onClick:this.addLabel,icon:"plus",content:"add label"}),o.a.createElement(_e.a.Button,{content:"submit"}),o.a.createElement("br",null),o.a.createElement(Fe.a.Group,null,a.map(function(t,a){return o.a.createElement(Fe.a,{key:"".concat(t.key)},o.a.createElement(Fe.a.Content,null,o.a.createElement(_e.a.Input,{label:"type",placeholder:"type",defaultValue:t.type,onChange:function(t,n){e.change(a,"type",n.value)}}),o.a.createElement(_e.a.Input,{label:"description",placeholder:"description",defaultValue:t.description,onChange:function(t,n){e.change(a,"description",n.value)}}),o.a.createElement(Ce.a,{onClick:function(t){e.showPickerFor(t,a)},style:{backgroundColor:"rgba(".concat(t.r,",").concat(t.g,",").concat(t.b,",").concat(t.a,")")}},o.a.createElement(He.a,{name:"crosshairs",color:At({r:t.r,g:t.g,b:t.b,a:t.a})}),o.a.createElement("span",{style:{color:At({r:t.r,g:t.g,b:t.b,a:t.a})}},"Color")),o.a.createElement(Ce.a,{icon:"remove circle",onClick:function(t){e.deleteLabel(t,a)}})))})),o.a.createElement("br",null),o.a.createElement(_e.a.Button,{content:"submit"}))}}]),t}(o.a.Component),Mt=a(348),Vt=a(71),Gt=(a(697),function(e){function t(e){var a;Object(ve.a)(this,t);var n=(a=Object(we.a)(this,Object(Ee.a)(t).call(this,e))).props.project,i=n.allowed,s=n.refused,r=n.requested,c=n.type,l=n.description,u=n.fullDescription,d=n.publicType,p=n.sequencenames,h=n.maxSize,m=a.props.projectTypes,g=p.map(function(e){return{originalName:e.name,originalVideo:e.video,originalHSplit:e.hSplit,originalVSplit:e.vSplit,numFiles:e.files,newName:e.name,newHSplit:e.hSplit,newVSplit:e.vSplit,deleted:!1,new:!1,updated:!1}}),b={newName:"",newFile:null,newVideo:m[c].video,newHSplit:1,newVSplit:1,newBeginS:0,newLengthS:100,newEveryNFrames:1,dropZoneActive:!1,deleted:!1,new:!0};return a.state={project:{allowed:i,refused:s,requested:r,owner:a.props.username,type:c,description:l,fullDescription:u,sequences:g,publicType:d,dropZoneActive:!0},newSequence:b,maxSize:h,scrollDown:o.a.createElement(He.a,{name:"angle double down",size:"big"}),scrollUp:null},a.scrollRef=null,a.moveItem=a.moveItem.bind(Object(ke.a)(Object(ke.a)(a))),a.addItem=a.addItem.bind(Object(ke.a)(Object(ke.a)(a))),a.removeItem=a.removeItem.bind(Object(ke.a)(Object(ke.a)(a))),a.onDragEnd=a.onDragEnd.bind(Object(ke.a)(Object(ke.a)(a))),a.onDragNewEnter=a.onDragNewEnter.bind(Object(ke.a)(Object(ke.a)(a))),a.onDragNewLeave=a.onDragNewLeave.bind(Object(ke.a)(Object(ke.a)(a))),a.onDropNew=a.onDropNew.bind(Object(ke.a)(Object(ke.a)(a))),a.onChange=a.onChange.bind(Object(ke.a)(Object(ke.a)(a))),a.getImageForType=a.getImageForType.bind(Object(ke.a)(Object(ke.a)(a))),a.onChangeNewSequence=a.onChangeNewSequence.bind(Object(ke.a)(Object(ke.a)(a))),a.onChangeSequence=a.onChangeSequence.bind(Object(ke.a)(Object(ke.a)(a))),a.onChangeProjectType=a.onChangeProjectType.bind(Object(ke.a)(Object(ke.a)(a))),a.changeProjectInfo=a.changeProjectInfo.bind(Object(ke.a)(Object(ke.a)(a))),a.addNewSequence=a.addNewSequence.bind(Object(ke.a)(Object(ke.a)(a))),a.resetNewSequence=a.resetNewSequence.bind(Object(ke.a)(Object(ke.a)(a))),a.addScrollListener=a.addScrollListener.bind(Object(ke.a)(Object(ke.a)(a))),a.handleScroll=a.handleScroll.bind(Object(ke.a)(Object(ke.a)(a))),a}return Object(Oe.a)(t,e),Object(je.a)(t,[{key:"getImageForType",value:function(e){return 2===e||3===e?Tt.a:Rt.a}},{key:"onDropNew",value:function(e){var t=this.state.newSequence;return 1===e.length&&(null!=t.newFile&&window.URL.revokeObjectURL(t.newFile.preview),t.newFile=e[0]),t.dropZoneActive=!1,this.setState({newSequence:t})}},{key:"onDragNewEnter",value:function(e){var t=this.state.newSequence;t.dropZoneActive=!0,this.setState({newSequence:t})}},{key:"onDragNewLeave",value:function(e){var t=this.state.newSequence;t.dropZoneActive=!1,this.setState({newSequence:t})}},{key:"addNewSequence",value:function(e){e.preventDefault();var t=this.state.newSequence;console.log(t);var a=this.state.project;if(null!=t.newFile&&""!==t.newName){var n=a.sequences.filter(function(e){return!e.deleted}).map(function(e){return e.newName});n.includes(t.newName)||n.length>=26||(a.sequences.push(t),this.setState({project:a}),this.resetNewSequence())}}},{key:"resetNewSequence",value:function(){var e={newName:"",files:0,newFile:null,newVideo:this.props.projectTypes[this.state.project.type].video,newHSplit:1,newVSplit:1,newBeginS:0,newLengthS:100,newEveryNFrames:1,dropZoneActive:!1,deleted:!1,new:!0},t=this.state.newSequence.newFile;null!=t&&window.URL.revokeObjectURL(t.preview),this.setState({newSequence:e})}},{key:"onChangeSequence",value:function(e,t,a){var n=this.state.project;n.sequences[e][t]=a,n.sequences[e].updated=!0,this.setState({project:n})}},{key:"onChangeNewSequence",value:function(e,t){var a=this.state.newSequence;a[e]=t,this.setState({newSequence:a})}},{key:"deleteSequence",value:function(e){var t=this.state.project,a=t.sequences[e].newFile;null!=a&&window.URL.revokeObjectURL(a.preview),t.sequences[e].deleted=!0,this.setState({project:t})}},{key:"changeProjectInfo",value:function(){var e=this.state.project;null==e.owner||e.allowed.includes(e.owner)?this.props.updateProject(e.allowed,e.refused,e.requested,e.publicType,e.owner,e.description,e.fullDescription,e.type,e.sequences):alert("Owner must be in allowed list.")}},{key:"onDragEnd",value:function(e){var t=e.source,a=e.destination;if(null!=a&&a.droppableId===t.droppableId)this.moveItem(t.droppableId,t.index,a.index);else if(null!=a){var n=this.removeItem(t.droppableId,t.index);this.addItem(a.droppableId,a.index,n)}}},{key:"moveItem",value:function(e,t,a){if(t!=a){var n=this.state.project,o=n[e],i=o[t];o.splice(t,1),o.splice(a,0,i),this.setState({project:n})}}},{key:"removeItem",value:function(e,t){var a=this.state.project,n=a[e][t];return a[e].splice(t,1),this.setState({project:a}),n}},{key:"addItem",value:function(e,t,a){var n=this.state.project;n[e].splice(t,0,a),this.setState({project:n})}},{key:"onChange",value:function(e,t){var a=this.state.project;a[e]=t,this.setState({project:a})}},{key:"onChangeProjectType",value:function(e,t){var a=this.state.project;a.type=t.value,a.newVideo=this.props.projectTypes[t.value].video,this.setState({project:a}),this.resetNewSequence()}},{key:"addScrollListener",value:function(e){e&&e.addEventListener("scroll",this.handleScroll)}},{key:"handleScroll",value:function(e){var t=null,a=null;e.target.scrollTop>0&&(t=o.a.createElement("div",{className:"scroll-up"},o.a.createElement(He.a,{name:"angle double up",size:"big"}))),e.target.scrollTop+e.target.clientHeight<e.target.scrollHeight&&(a=o.a.createElement("div",{className:"scroll-down"},o.a.createElement(He.a,{name:"angle double down",size:"big"}))),this.setState({scrollDown:a,scrollUp:t})}},{key:"render",value:function(){var e=this,t=this.state.project,a=t.description,n=t.fullDescription,i=t.requested,s=t.allowed,r=t.refused,c=t.publicType,l=t.type,u=t.sequences,d=t.owner,p=this.state,h=p.newSequence,m=p.maxSize,g=this.props.projectTypes,b=Object.keys(g).map(function(t,a){return{image:{avatar:!0,src:e.getImageForType(parseInt(t))},text:g[t].name,value:parseInt(t)}});return o.a.createElement(Pt.a,null,o.a.createElement(lt.a,{as:"h2"},"Project Settings"),o.a.createElement("div",{className:"project-settings-container"},o.a.createElement(It.a,{className:"project-settings-segment"},o.a.createElement("div",{className:"project-settings-holder",ref:this.addScrollListener},o.a.createElement(_e.a,null,o.a.createElement(Ce.a,{style:{float:"right"},type:"submit",primary:!0,onClick:this.changeProjectInfo},"Save Changes"),o.a.createElement(Ce.a,{style:{float:"right"},type:"cancel",primary:!1,onClick:function(){e.props.gotProjectForUpdate(null)}},"Cancel"),o.a.createElement(lt.a,{as:"h4"},"Project Description"),o.a.createElement(_e.a.Group,null,o.a.createElement(_e.a.Input,{defaultValue:a,placeholder:"Project description",onChange:function(t,a){e.onChange("description",a.value)},"data-for":"description","data-tip":"This is the short description of the project. It will be seen on the projects page.","data-iscapture":"true"})),o.a.createElement(lt.a,{as:"h4"},"Full Description"),o.a.createElement(_e.a.Group,null,o.a.createElement(_e.a.TextArea,{defaultValue:n,placeholder:"Project's detailed description",onChange:function(t,a){e.onChange("fullDescription",a.value)},"data-for":"fullDescription","data-tip":"The long/complete description of the project. This will be displayed on the details modal about a project.","data-iscapture":"true"})),o.a.createElement(lt.a,{as:"h4"},"Owner"),o.a.createElement(_e.a.Group,null,o.a.createElement(_e.a.Input,{defaultValue:d,onChange:function(t,a){e.onChange("owner",a.value)}})),o.a.createElement(lt.a,{as:"h4"},"Select project type"),o.a.createElement(_e.a.Group,null,o.a.createElement(dt.a,{fluid:!0,selection:!0,options:b,defaultValue:l,onChange:this.onChangeProjectType})),o.a.createElement(_e.a.Group,null,o.a.createElement(dt.a,{fluid:!0,selection:!0,options:[{text:"public",value:!0,icon:{name:"unlock"}},{text:"private",value:!1,icon:{name:"lock"}}],defaultValue:c,onChange:function(t,a){e.onChange("publicType",a.value)}})),o.a.createElement(_e.a.Group,{className:"drag-drop-context"},o.a.createElement(Vt.a,{onDragEnd:this.onDragEnd},o.a.createElement("div",{className:"requested-items-drag-drop"},o.a.createElement(lt.a,{as:"h4"},"Requested list"),o.a.createElement(Vt.c,{droppableId:"requested"},function(e,t){return o.a.createElement(It.a,{style:{backgroundColor:t.isDraggingOver?"blue":"white"}},o.a.createElement("div",{ref:e.innerRef},i.map(function(e,t){return o.a.createElement(Vt.b,{key:e,draggableId:e,index:t},function(t,a){return o.a.createElement("div",Object.assign({className:"requested-item",ref:t.innerRef},t.draggableProps,t.dragHandleProps),e)})}),o.a.createElement("br",null),e.placeholder))})),o.a.createElement("div",{className:"allowed-items-drag-drop"},o.a.createElement(lt.a,{as:"h4"},"Allowed list"),o.a.createElement(Vt.c,{droppableId:"allowed"},function(e,t){return o.a.createElement(It.a,{style:{backgroundColor:t.isDraggingOver?"blue":"white"}},o.a.createElement("div",{ref:e.innerRef},s.map(function(e,t){return o.a.createElement(Vt.b,{key:e,draggableId:e,index:t},function(t,a){return o.a.createElement("div",Object.assign({className:"allowed-item",ref:t.innerRef},t.draggableProps,t.dragHandleProps),e)})}),o.a.createElement("br",null),e.placeholder))})),o.a.createElement("div",{className:"refused-items-drag-drop"},o.a.createElement(lt.a,{as:"h4"},"Refused list"),o.a.createElement(Vt.c,{droppableId:"refused"},function(e,t){return o.a.createElement(It.a,{style:{backgroundColor:t.isDraggingOver?"blue":"white"}},o.a.createElement("div",{ref:e.innerRef},r.map(function(e,t){return o.a.createElement(Vt.b,{key:e,draggableId:e,index:t},function(t,a){return o.a.createElement("div",Object.assign({className:"refused-item",ref:t.innerRef},t.draggableProps,t.dragHandleProps),e)})}),o.a.createElement("br",null),e.placeholder))})))),o.a.createElement(lt.a,{as:"h4"},"New Sequence"),o.a.createElement(It.a,{style:{backgroundColor:"gray"}},o.a.createElement(_e.a.Group,null,o.a.createElement(He.a,{name:h.newVideo?"video":"camera",size:"big"}),o.a.createElement(Mt.a,{accept:["application/gzip","application/x-bzip","application/x-bzip2"],multiple:!1,maxSize:m*Math.pow(2,20),onDragEnter:this.onDragNewEnter,onDragLeave:this.onDragNewLeave,"data-for":"dropzoneNewSequence","data-tip":h.newVideo?"<p>Drop <b>a</b> video file here of MP2, MP4, TS types which has been gzipped, bzipped, tar+gz or tar+bz2</p>":"<p>Drop image files here which have been gzipped or bzipped</p>","data-html":!0,"data-iscapture":"true",onDrop:this.onDropNew},function(e){var t=e.getRootProps,a=e.getInputProps;return o.a.createElement("section",null,o.a.createElement("div",Object.assign({},t(),{className:h.dropZoneActive?"dropzone-all dropzone-active":"dropzone-all dropzone-inactive"}),o.a.createElement("input",a()),o.a.createElement("p",null,"Drag 'n' drop some files here, or click to select files."),null!=h.newFile&&o.a.createElement("div",null,"".concat(h.newFile.path," ").concat((h.newFile.size/Math.pow(2,20)).toPrecision(4),"MB"))))}),o.a.createElement(_e.a.TextArea,{label:"sequence name",value:h.newName,onChange:function(t,a){e.onChangeNewSequence("newName",a.value)}}),o.a.createElement(_e.a.Input,{size:"small",type:"number",min:"1",max:"10",label:"Vertical split",defaultValue:h.newVSplit,onChange:function(t,a){e.onChangeNewSequence("newVSplit",parseInt(a.value))}}),o.a.createElement(_e.a.Input,{size:"small",type:"number",min:"1",max:"10",label:"Horizontal split",value:h.newHSplit,onChange:function(t,a){e.onChangeNewSequence("newHSplit",parseInt(a.value))}}),h.newVideo&&o.a.createElement(_e.a.Input,{size:"small",type:"number",label:"Start seconds",min:"0",max:"360",value:h.newBeginS,onChange:function(t,a){e.onChangeNewSequence("newBeginS",parseInt(a.value))}}),h.newVideo&&o.a.createElement(_e.a.Input,{size:"small",type:"number",label:"Length to capture",min:"10",max:"900",value:h.newLengthS,onChange:function(t,a){e.onChangeNewSequence("newLengthS",parseInt(a.value))}}),h.newVideo&&o.a.createElement(_e.a.Input,{size:"small",type:"number",label:"Every n frames",min:"0",max:"10",value:h.newEveryNFrames,onChange:function(t,a){e.onChangeNewSequence("newEveryNFrames",parseInt(a.value))}}),o.a.createElement(Ce.a,{primary:!0,onClick:this.addNewSequence},"Add"),o.a.createElement(Ce.a,{secondary:!0,onClick:this.resetNewSequence},"Reset"))),o.a.createElement(lt.a,{as:"h4"},"Created Sequences"),u.map(function(t,a){return o.a.createElement(It.a,{key:"".concat(t.newName,"-").concat(t.deleted),style:{display:t.deleted?"none":"block"}},o.a.createElement(_e.a.Group,null,o.a.createElement(He.a,{name:t.newVideo?"video":"camera",size:"big"}),o.a.createElement("div",{className:"dropzone-files"},t.numFiles?t.numFiles:0," files"),o.a.createElement(_e.a.TextArea,{label:"sequence name",value:t.newName,onChange:function(t,n){e.onChangeSequence(a,"newName",n.value)}}),o.a.createElement(_e.a.Input,{size:"small",type:"number",min:"1",max:"5",label:"Vertical split",value:t.newVSplit,onChange:function(t,n){e.onChangeSequence(a,"newVSplit",parseInt(n.value))}}),o.a.createElement(_e.a.Input,{size:"small",type:"number",min:"1",max:"5",label:"Horizontal split",value:t.newHSplit,onChange:function(t,n){e.onChangeSequence(a,"newHSplit",parseInt(n.value))}}),o.a.createElement(He.a,{color:"red",onClick:function(){e.deleteSequence(a)},name:"x","data-for":"remove","data-tip":"Remove this item","data-iscapture":"true",size:"large",style:{float:"right"}})))}),o.a.createElement(mt.a,{id:"description",place:"bottom",type:"dark"}),o.a.createElement(mt.a,{id:"fullDescription",place:"bottom",type:"dark"}),o.a.createElement(mt.a,{id:"dropzoneSequence",html:!0,place:"bottom",type:"dark"}),o.a.createElement(mt.a,{id:"dropzoneNewSequence",html:!0,place:"bottom",type:"dark"}),o.a.createElement(mt.a,{id:"remove",place:"bottom",type:"dark"})))),o.a.createElement("div",{className:"scroll-indicators"},o.a.createElement("div",{className:"scroll-up"},this.state.scrollUp),o.a.createElement("div",{className:"scroll-down"},this.state.scrollDown))))}}]),t}(o.a.Component));function Xt(){var e=Object(xt.a)(["\n  display: block;\n  margin: 0 auto;\n  border-color: red;\n  background-color: white;\n  z-index: 100;\n"]);return Xt=function(){return e},e}var Bt=Object(qt.css)(Xt()),Yt=function(e){function t(e){var a;return Object(ve.a)(this,t),(a=Object(we.a)(this,Object(Ee.a)(t).call(this,e))).state={filter:"",project_for_update:null,cardsToDisplay:{owned:[],allowed:[],refused:[],requested:[],other:[]},showLoading:!1,showProjects:!0,showLabels:!1,showColorPicker:!1,showSettings:!1},a.filter=a.filter.bind(Object(ke.a)(Object(ke.a)(a))),a.showLabels=a.showLabels.bind(Object(ke.a)(Object(ke.a)(a))),a.hideLabels=a.hideLabels.bind(Object(ke.a)(Object(ke.a)(a))),a.getProjectForUpdate=a.getProjectForUpdate.bind(Object(ke.a)(Object(ke.a)(a))),a.addLabels=a.addLabels.bind(Object(ke.a)(Object(ke.a)(a))),a}return Object(Oe.a)(t,e),Object(je.a)(t,[{key:"filter",value:function(e){this.setState({filter:e})}},{key:"showLabels",value:function(){this.setState({showLabels:!0,showProjects:!1})}},{key:"hideLabels",value:function(){this.setState({showLabels:!1,showProjects:!0})}},{key:"addLabels",value:function(e){this.props.addLabels(e),this.setState({showLabels:!1,showProjects:!0})}},{key:"getProjectForUpdate",value:function(){this.setState({showLoading:!0}),this.props.getProjectForUpdate()}},{key:"componentWillReceiveProps",value:function(e){console.log(this.state,e,"State and props ProjectsComponent"),null==e.projectForUpdate||this.state.showSettings?null==e.projectForUpdate&&this.state.showSettings&&this.setState({projectForUpdate:null,showSettings:!1,showProjects:!0,showLoading:!1}):this.setState({projectForUpdate:e.projectForUpdate,showSettings:!0,showProjects:!1,showLoading:!1})}},{key:"saveProjectLabels",value:function(e){this.state}},{key:"render",value:function(){var e=this,t=this.props,a=(t.owned,t.requested,t.allowed,t.refused,t.other,t.labels),n=t.projectForUpdate;return console.log(this.props,this.state,"PROJECT COMPONENT PROPS"),o.a.createElement(Pt.a,null,o.a.createElement($e.a,{open:this.state.showLoading,size:"tiny"},o.a.createElement($e.a.Header,null,"Loading..."),o.a.createElement($e.a.Content,null,o.a.createElement(zt.RingLoader,{className:Bt,sizeUnit:"px",color:"#123abc",loading:this.state.showLoading}))),this.state.showProjects&&o.a.createElement(Pt.a,null,o.a.createElement(lt.a,{as:"h1"},"Projects"),["owned","requested","allowed","refused","other"].map(function(t){return o.a.createElement(Ut,{key:t,loggedIn:e.props.loggedIn,type:t,items:e.props[t],filter:e.state.filter,projectTypes:e.props.projectTypes,joinProject:e.props.joinProject,changeProject:e.props.changeProject,getProjectForUpdate:e.getProjectForUpdate,getProjectAnnotations:e.props.getProjectAnnotations,leaveProject:e.props.leaveProject,showLabels:e.showLabels})})),this.state.showSettings&&o.a.createElement(Pt.a,null,o.a.createElement(Gt,{project:n,projectTypes:this.props.projectTypes,gotProjectForUpdate:this.props.gotProjectForUpdate,username:this.props.username,updateProject:this.props.updateProject})),this.state.showLabels&&o.a.createElement(Pt.a,null,o.a.createElement(Ft,{labels:a,projectTypes:this.props.projectTypes,addLabels:this.addLabels})))}}]),t}(o.a.Component),Zt=function(e){function t(e){var a;return Object(ve.a)(this,t),(a=Object(we.a)(this,Object(Ee.a)(t).call(this,e))).state={},a}return Object(Oe.a)(t,e),Object(je.a)(t,[{key:"componentWillMount",value:function(){this.props.getTypes(),this.props.getProjects(),this.props.getLabels()}},{key:"render",value:function(){var e=this.props,t=e.loggedIn,a=e.username,n=e.allowed,i=e.joined,s=e.other,r=e.owned,c=e.refused,l=e.requested,u=e.labels,d=e.projectForUpdate;return o.a.createElement(Yt,Object(Nt.a)({loggedIn:t,allowed:n,joined:i,other:s,owned:r,refused:c,requested:l,username:a,labels:u,addLabels:this.props.addLabels,getLabels:this.props.getLabels,joinProject:this.props.joinProject,leaveProject:this.props.leaveProject,changeProject:this.props.changeProject,getProjectForUpdate:this.props.getProjectForUpdate,gotProjectForUpdate:this.props.gotProjectForUpdate,requestAccessToProject:this.props.requestAccessToProject,getProjectAnnotations:this.props.getProjectAnnotations,projectTypes:this.props.projectTypes,history:this.props.history,updateProject:this.props.updateProject,projectForUpdate:d},"username",this.props.username))}}]),t}(n.Component),Jt=Zt=Object(s.c)(function(e){var t=e.project.projectForUpdate,a=e.project.projects,n=a.allowed,o=a.other,i=a.owned,s=a.refused,r=a.requested,c=a.joined,l=e.types.projectTypes;return{labels:e.labels.labels,loggedIn:e.auth.loggedIn,signedUp:e.auth.signedUp,session:e.auth.session,email:e.auth.email,score:e.auth.score,allowed:n,other:o,owned:i,refused:s,requested:r,joined:c,projectForUpdate:t,username:e.auth.username,projectTypes:l}},function(e){return Object(c.b)({getProjects:Y,joinProject:F,leaveProject:M,getLabels:b,getProjectForUpdate:V,gotProjectForUpdate:Q,getProjectAnnotations:H,changeProject:A,requestAccessToProject:G,updateProject:X,getTypes:le,addLabels:f},e)})(Zt),Qt=(a(732),function(){return o.a.createElement("div",{className:"scrolling-window"},o.a.createElement(ye.a,{component:De}),o.a.createElement(ye.c,null,o.a.createElement(ye.a,{exact:!0,path:"/",component:Ct}),o.a.createElement(ye.a,{path:"/login",component:Xe}),o.a.createElement(ye.a,{path:"/signup",component:Qe}),o.a.createElement(ye.a,{exact:!0,path:"/annotate",component:jt}),o.a.createElement(ye.a,{exact:!0,path:"/projects",component:Jt})))}),$t=function(e){var t=[];t.push(u.a);var a=Object(d.createLogger)({level:"info",collapsed:!0});t.push(a);var n=Object(be.a)(fe);return t.push(n),Object(c.e)(ge(fe),e,Object(c.d)(c.a.apply(void 0,t)))}();Object(i.render)(o.a.createElement("div",null,o.a.createElement(s.a,{store:$t},o.a.createElement(r.a,{history:fe},o.a.createElement(Qt,null)))),document.getElementById("root"))},99:function(e,t,a){e.exports=a.p+"static/media/ourlabels.dcb68a71.png"}},[[359,1,2]]]);
//# sourceMappingURL=main.c2115db0.chunk.js.map